# üìù Proc√©dure de G√©n√©ration de Blog - Version Universelle
# Optimis√©e SEO, sans images, pipeline strict, cat√©gorisation automatique
# Compatible avec toutes les villes Moverz

name: "G√©n√©ration de Blog Moverz"
version: "2.1"
description: "Proc√©dure universelle pour g√©n√©rer du contenu blog optimis√© SEO avec taxonomie cat√©gories pour n'importe quelle ville"

# üéØ OBJECTIFS STRAT√âGIQUES
objectives:
  - "G√©n√©rer du contenu blog optimis√© SEO pour chaque ville"
  - "Respecter strictement les mots_obligatoires (2-3x chacun)"
  - "Maintenir une densit√© de mot-cl√© principal de 2-3%"
  - "Cr√©er un r√©seau de liens internes coh√©rent (6-10 liens/article)"
  - "Int√©grer Schema.org Article + FAQPage"
  - "√âviter tout article orphelin"
  - "Optimiser pour le r√©f√©rencement local"

# üìã PIPELINE DE G√âN√âRATION (ORDRE STRICT)
pipeline:
  - step: "read_spec"
    name: "Lecture des Sp√©cifications"
    description: "Charger et valider le fichier blog_spec-[ville].yaml"
    requirements:
      - "Fichier YAML valide avec structure compl√®te"
      - "Tous les champs obligatoires pr√©sents"
      - "Format des mots_obligatoires conforme"
      - "Chargement de la taxonomie des cat√©gories"
    validation:
      - "Structure YAML valide"
      - "Champs city, domain, locale pr√©sents"
      - "Au moins 1 article d√©fini"
      - "Chaque article a slug, title, variants, brief_seo, mots_obligatoires"
      - "Category_overrides charg√©s si pr√©sents"

  - step: "deepsearch_1"
    name: "Recherche Approfondie Initiale"
    description: "Analyser la concurrence et les opportunit√©s SEO"
    requirements:
      - "Analyse des SERP pour chaque mot-cl√© principal"
      - "Identification des gaps de contenu"
      - "Recherche des questions fr√©quentes"
    outputs:
      - "Rapport de concurrence par article"
      - "Liste des questions FAQ identifi√©es"
      - "Recommandations de structure"

  - step: "generate_pillars"
    name: "G√©n√©ration des Articles Piliers"
    description: "Cr√©er les articles principaux (1200-1800 mots)"
    requirements:
      - "Longueur cible : 1200-1800 mots"
      - "Densit√© mot-cl√© principal : 2-3%"
      - "Mots_obligatoires r√©p√©t√©s 2-3x chacun"
      - "Structure H1, H2, H3 optimis√©e"
      - "Introduction engageante (150-200 mots)"
      - "Conclusion avec CTA (100-150 mots)"
    content_structure:
      - "H1 : Titre principal avec mot-cl√©"
      - "H2 : Introduction (150-200 mots)"
      - "H2 : Section principale 1 (300-400 mots)"
      - "H2 : Section principale 2 (300-400 mots)"
      - "H2 : Section principale 3 (300-400 mots)"
      - "H2 : FAQ (4-6 questions, 80-120 mots/r√©ponse)"
      - "H2 : Conclusion + CTA (100-150 mots)"

  - step: "generate_satellites"
    name: "G√©n√©ration des Articles Satellites"
    description: "Cr√©er les articles compl√©mentaires (800-1200 mots)"
    requirements:
      - "Longueur cible : 800-1200 mots"
      - "Densit√© mot-cl√© secondaire : 2-3%"
      - "Mots_obligatoires r√©p√©t√©s 2-3x chacun"
      - "Liens vers articles piliers (2-3 minimum)"
    content_structure:
      - "H1 : Titre avec mot-cl√© secondaire"
      - "H2 : Introduction (100-150 mots)"
      - "H2 : Section principale 1 (200-300 mots)"
      - "H2 : Section principale 2 (200-300 mots)"
      - "H2 : FAQ (3-4 questions, 80-120 mots/r√©ponse)"
      - "H2 : Conclusion + CTA (80-120 mots)"

  - step: "deepsearch_2_review"
    name: "Revue Approfondie Post-G√©n√©ration"
    description: "V√©rifier la qualit√© et l'optimisation SEO"
    requirements:
      - "V√©rification densit√© mots-cl√©s"
      - "Contr√¥le r√©p√©tition mots_obligatoires"
      - "Validation structure H1/H2/H3"
      - "V√©rification longueurs cibles"
    checks:
      - "Densit√© mot-cl√© principal : 2-3%"
      - "Mots_obligatoires : 2-3x chacun minimum"
      - "Longueur piliers : 1200-1800 mots"
      - "Longueur satellites : 800-1200 mots"
      - "Structure s√©mantique coh√©rente"

  - step: "internal_linking"
    name: "Optimisation des Liens Internes"
    description: "Cr√©er un r√©seau de liens internes coh√©rent"
    requirements:
      - "6-10 liens internes par article"
      - "Ancres naturelles et contextuelles"
      - "Distribution √©quilibr√©e des liens"
      - "Liens vers pages principales du site"
    linking_strategy:
      - "Liens vers articles piliers (2-3)"
      - "Liens vers articles satellites (2-3)"
      - "Liens vers pages services (1-2)"
      - "Liens vers pages quartiers (1-2)"
      - "Liens vers pages FAQ (1-2)"

  - step: "build_categories"
    name: "Construction des Cat√©gories"
    description: "G√©n√©rer les pages d'index cat√©gorie et assigner les cat√©gories"
    requirements:
      - "Assigner cat√©gorie √† chaque article (obligatoire)"
      - "Appliquer mapping par d√©faut si pas d'override"
      - "G√©n√©rer pages d'index cat√©gorie"
      - "Cr√©er maillage entre cat√©gories et piliers"
    category_assignment:
      - "V√©rifier category_overrides du spec"
      - "Appliquer mapping par d√©faut si absent"
      - "Assigner tags libres si fournis"
    category_pages:
      - "G√©n√©rer /blog/[ville]/categories/{slug}/index.md"
      - "Contenu 400-600 mots par page cat√©gorie"
      - "H2 sous-th√®mes, liste d'articles"
      - "Lien vers pilier cl√© de la cat√©gorie"

  - step: "qa_validation"
    name: "Validation Qualit√© Automatique"
    description: "Contr√¥les finaux avant export"
    requirements:
      - "H1 unique par article"
      - "M√©tadonn√©es compl√®tes"
      - "Longueurs respect√©es"
      - "Mots_obligatoires valid√©s"
      - "FAQ compl√®tes"
      - "Liens internes fonctionnels"
      - "Schema.org valide"
    validation_checks:
      - "Structure HTML valide"
      - "M√©tadonn√©es SEO compl√®tes"
      - "Densit√© mots-cl√©s conforme"
      - "Absence d'articles orphelins"
      - "Liens internes fonctionnels"

  - step: "export"
    name: "Export Final"
    description: "G√©n√©ration des fichiers Markdown optimis√©s"
    requirements:
      - "Fichiers Markdown valides"
      - "M√©tadonn√©es frontmatter compl√®tes"
      - "Structure de dossiers coh√©rente"
      - "Noms de fichiers SEO-friendly"
    outputs:
      - "Articles Markdown dans /content/blog/"
      - "M√©tadonn√©es frontmatter compl√®tes"
      - "Structure de cat√©gories coh√©rente"

# üè∑Ô∏è TAXONOMIE DES CAT√âGORIES (FIXES)
categories:
  fixed_categories:
    - "dem√©nagement-etudiant"
    - "dem√©nagement-entreprise"
    - "prix-et-tarifs"
    - "devis-demenagement"
    - "dem√©nagement-economique"
    - "dem√©nagement-urgent"
    - "longue-distance"
    - "garde-meuble"
    - "international"
    - "demenagement-piano"
  
  category_assignment:
    default_mapping:
      "d√©m√©nagement pas cher [ville]": "dem√©nagement-economique"
      "d√©m√©nagement international [ville]": "international"
      "d√©m√©nagement piano [ville]": "demenagement-piano"
      "garde meuble [ville]": "garde-meuble"
      "petit d√©m√©nagement [ville]": "dem√©nagement-etudiant"
      "aide au d√©m√©nagement [ville]": "dem√©nagement-urgent"  # Si assistance rapide
      "d√©m√©nagement d'entreprise [ville]": "dem√©nagement-entreprise"
      "d√©m√©nageur [ville]": "devis-demenagement"
      "prix d√©m√©nagement [ville]": "prix-et-tarifs"
      "location camion d√©m√©nagement [ville]": "dem√©nagement-economique"
    
    assignment_rules:
      - "Si category_overrides pr√©sent dans spec ‚Üí prioritaire"
      - "Sinon ‚Üí appliquer mapping par d√©faut"
      - "Chaque article a 1 cat√©gorie principale (obligatoire)"
      - "Tags libres optionnels si fournis dans spec"

# üìä EXIGENCES TECHNIQUES STRICTES
technical_requirements:
  seo_optimization:
    - "Densit√© mot-cl√© principal : 2-3%"
    - "Densit√© mot-cl√© secondaire : 2-3%"
    - "Mots_obligatoires : 2-3x chacun minimum"
    - "H1 unique par article"
    - "Structure H2/H3 s√©mantique"
    - "M√©tadonn√©es title, description, keywords"
    - "URLs SEO-friendly"

  content_quality:
    - "Longueur piliers : 1200-1800 mots"
    - "Longueur satellites : 800-1200 mots"
    - "R√©ponses FAQ : 80-120 mots"
    - "Introduction engageante"
    - "Conclusion avec CTA"
    - "Ton professionnel et local"

  schema_org:
    - "Article schema pour tous les articles"
    - "FAQPage schema pour sections FAQ"
    - "BreadcrumbList pour navigation"
    - "LocalBusiness pour contexte local"

  internal_linking:
    - "6-10 liens internes par article"
    - "Ancres naturelles et contextuelles"
    - "Distribution √©quilibr√©e"
    - "Liens vers pages principales"
    - "Pas d'articles orphelins"

# üö® R√àGLES D'ARR√äT (ERREURS CRITIQUES)
error_conditions:
  - "Fichier spec manquant ou invalide"
  - "Mots_obligatoires non respect√©s (< 2x)"
  - "Densit√© mot-cl√© < 2% ou > 3%"
  - "Longueur article < 800 mots"
  - "H1 manquant ou multiple"
  - "M√©tadonn√©es incompl√®tes"
  - "Liens internes < 6 par article"
  - "Schema.org invalide"
  - "Article orphelin d√©tect√©"

# üìÅ STRUCTURE DE SORTIE
output_structure:
  content_path: "/content/blog/"
  file_naming: "YYYY-MM-DD-[slug].md"
  category_structure:
    articles_path: "/blog/[ville]/piliers/*"
    satellites_path: "/blog/[ville]/satellites/*"
    categories_path: "/blog/[ville]/categories/*"
    sitemap_path: "/blog/[ville]/sitemap-blog.xml"
  frontmatter_required:
    - "title"
    - "description"
    - "date"
    - "category"  # Obligatoire (1 des 10 cat√©gories fixes)
    - "tags"     # Optionnel (liste libre)
    - "author"
    - "featured"
    - "excerpt"

# üîÑ PROCESSUS DE VALIDATION
validation_process:
  pre_generation:
    - "V√©rification structure spec"
    - "Validation mots_obligatoires"
    - "Contr√¥le coh√©rence donn√©es"
  
  post_generation:
    - "Validation longueurs"
    - "Contr√¥le densit√© mots-cl√©s"
    - "V√©rification liens internes"
    - "Test Schema.org"
    - "Validation m√©tadonn√©es"

# üìà M√âTRIQUES DE SUCC√àS
success_metrics:
  content_quality:
    - "Longueur cible respect√©e : 100%"
    - "Mots_obligatoires : 2-3x chacun : 100%"
    - "Densit√© mots-cl√©s : 2-3% : 100%"
    - "Structure H1/H2/H3 : 100%"
  
  seo_optimization:
    - "M√©tadonn√©es compl√®tes : 100%"
    - "Liens internes : 6-10 par article : 100%"
    - "Schema.org valide : 100%"
    - "URLs SEO-friendly : 100%"
  
  technical_quality:
    - "Markdown valide : 100%"
    - "Pas d'articles orphelins : 100%"
    - "Liens fonctionnels : 100%"
    - "Structure coh√©rente : 100%"

# üéØ NOTES IMPORTANTES
notes:
  - "Cette proc√©dure est universelle et s'applique √† toutes les villes"
  - "Aucune image n'est g√©n√©r√©e (focus contenu textuel)"
  - "Respect strict des mots_obligatoires est OBLIGATOIRE"
  - "La densit√© de mots-cl√©s doit √™tre pr√©cise (2-3%)"
  - "Tous les articles doivent √™tre interconnect√©s"
  - "Le Schema.org est obligatoire pour le SEO"
  - "En cas d'erreur, STOP et corriger avant de continuer"
